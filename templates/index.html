<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé≤ Lightning Dice AI Grid Tracker</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üé≤ Lightning Dice AI Grid Tracker</h1>
            <p>72-Hour Data Analysis | Google Sheets Style Grid | AI Predictions</p>
            
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color low-color"></div>
                    <span>LOW (3-9)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color middle-color"></div>
                    <span>MIDDLE (10-11)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color high-color"></div>
                    <span>HIGH (12-18)</span>
                </div>
            </div>
        </div>

        <div class="status-bar">
            <div class="status-item">
                <div class="status-dot online"></div>
                <span id="status-text">Connecting...</span>
            </div>
            <div class="status-item">
                <span>üìä Games:</span>
                <span id="total-games">0</span>
            </div>
            <div class="status-item">
                <span>ü§ñ AI:</span>
                <span id="ai-status">Loading...</span>
            </div>
            <div class="status-item">
                <span>üïí Updated:</span>
                <span id="last-update">--:--:--</span>
            </div>
            <div class="status-item">
                <span>üìê Grid:</span>
                <span id="grid-status">0/300</span>
            </div>
        </div>

        <div class="dashboard">
            <!-- Left Sidebar -->
            <div class="sidebar">
                <div class="section">
                    <h3><i class="fas fa-chart-line"></i> AI Analysis</h3>
                    <a href="/ai-analysis" class="filter-btn" style="text-align: center; justify-content: center;">
                        <i class="fas fa-robot"></i> View AI Analysis Dashboard
                    </a>
                </div>
    
                <div class="section">
                    <h3><i class="fas fa-sliders-h"></i> Controls</h3>
                    
                    <div class="filter-buttons">
                        <button class="filter-btn active" onclick="filterGrid('all')">
                            <i class="fas fa-layer-group"></i> All Games
                        </button>
                        <button class="filter-btn low-btn" onclick="filterGrid('LOW')">
                            <i class="fas fa-arrow-down"></i> LOW (3-9)
                        </button>
                        <button class="filter-btn middle-btn" onclick="filterGrid('MIDDLE')">
                            <i class="fas fa-equals"></i> MIDDLE (10-11)
                        </button>
                        <button class="filter-btn high-btn" onclick="filterGrid('HIGH')">
                            <i class="fas fa-arrow-up"></i> HIGH (12-18)
                        </button>
                    </div>
                    
                    <div class="search-box">
                        <input type="text" id="search-input" placeholder="üîç Search game ID or total...">
                    </div>
                </div>

                <div class="section">
                    <h3><i class="fas fa-chart-bar"></i> Statistics</h3>
                    <div class="stats-card">
                        <div class="stat-row">
                            <span>Total Games:</span>
                            <span id="stat-total" class="stat-value">0</span>
                        </div>
                        <div class="stat-row">
                            <span>LOW (3-9):</span>
                            <span id="stat-low" class="stat-value">0</span>
                        </div>
                        <div class="stat-row">
                            <span>MIDDLE (10-11):</span>
                            <span id="stat-middle" class="stat-value">0</span>
                        </div>
                        <div class="stat-row">
                            <span>HIGH (12-18):</span>
                            <span id="stat-high" class="stat-value">0</span>
                        </div>
                        <div class="stat-row">
                            <span>Grid Filled:</span>
                            <span id="stat-filled" class="stat-value">0%</span>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h3><i class="fas fa-robot"></i> AI Prediction</h3>
                    <div class="prediction-card" id="prediction-card">
                        <div class="loading">Loading AI prediction...</div>
                    </div>
                    
                    <button class="refresh-btn" onclick="getAIPrediction()">
                        <i class="fas fa-sync-alt"></i> Get AI Prediction
                    </button>
                    
                    <button class="refresh-btn secondary" onclick="forceRefresh()">
                        <i class="fas fa-redo"></i> Force Refresh
                    </button>
                </div>

                <!-- üî• NEW ENTRY SIGNAL SECTION -->
                <div class="section">
                    <h3><i class="fas fa-bell"></i> Entry Signal</h3>
                    <div class="signal-card" id="signal-card">
                        <div class="loading">Analyzing signals...</div>
                    </div>
                    
                    <div class="signal-controls">
                        <button class="refresh-btn" onclick="checkEntrySignal()" style="margin-bottom: 5px;">
                            <i class="fas fa-bolt"></i> Check Signal Now
                        </button>
                        <div class="auto-refresh-small">
                            <span>Auto-check (5s):</span>
                            <label class="switch small">
                                <input type="checkbox" id="signal-auto-refresh" checked>
                                <span class="slider small"></span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="signal-details" id="signal-details" style="display: none;">
                        <!-- Details will be loaded here -->
                    </div>
                </div>

                <div class="section">
                    <h3><i class="fas fa-history"></i> Recent Games</h3>
                    <div class="recent-games" id="recent-games">
                        <div class="loading">Loading...</div>
                    </div>
                </div>
            </div>

            <!-- Main Grid -->
            <div class="main-content">
                <div class="content-header">
                    <h2><i class="fas fa-table"></i> Game Grid (A1 to T15)</h2>
                    <div class="view-controls">
                        <span id="current-view">Showing: All Games</span>
                        <div class="auto-refresh">
                            <span>Auto-refresh:</span>
                            <label class="switch">
                                <input type="checkbox" id="auto-refresh-toggle" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="grid-container" id="grid-container">
                    <div class="loading">Loading grid data...</div>
                </div>

                <div class="footer-note">
                    <p><i class="fas fa-info-circle"></i> Hover over cells for details | Auto-updates every 5 seconds</p>
                    <p class="sub-note">Data Source: Casino.org API | Grid: 15 rows √ó 20 columns (300 cells total)</p>
                </div>
            </div>
        </div>
    </div>



    <!-- Notification Container -->
    <div id="notification-container"></div>

    <!-- Game Details Modal -->
    <div class="modal" id="game-modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <h3 id="modal-title">Game Details</h3>
            <div id="modal-body">
                Loading details...
            </div>
        </div>
    </div>

    <script src="/static/script.js"></script>
</body>
</html>
